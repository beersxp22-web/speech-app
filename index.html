<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>üó£Ô∏è ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏π‡∏î</title>
<link rel="manifest" href="manifest.json">
<meta name="theme-color" content="#22d3ee">
<style>
/* --- ‡∏™‡πÑ‡∏ï‡∏•‡πå‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÄ‡∏î‡∏¥‡∏° --- */
body { font-family: sans-serif; text-align:center; padding:20px; background: linear-gradient(135deg,#a5f3fc,#fbcfe8);}
h1 { margin-bottom:20px; font-size:2.2em; font-weight:bold;
     background: linear-gradient(90deg,#22d3ee,#f472b6,#facc15);
     -webkit-background-clip:text; -webkit-text-fill-color:transparent;
     text-shadow:2px 2px 5px rgba(0,0,0,0.2); animation:hueShift 5s infinite linear;}
@keyframes hueShift {0%{filter:hue-rotate(0deg);}100%{filter:hue-rotate(360deg);}}
.button-grid {display:grid; grid-template-columns:repeat(2,1fr); gap:15px; margin-bottom:20px;}
.speech-btn {position:relative; border:none; border-radius:20px; padding:10px; background:white;
             box-shadow:0 4px 6px rgba(0,0,0,0.2); transition: transform 0.2s, box-shadow 0.2s, background 0.4s; cursor:pointer;}
.speech-btn:hover {transform:scale(1.05); box-shadow:0 6px 12px rgba(0,0,0,0.3);}
.speech-btn img {width:100px;height:100px;border-radius:15px; object-fit:cover;}
.speech-btn span {display:block; margin-top:5px; font-weight:bold;}
.add-form {background: rgba(255,255,255,0.8); padding:15px; border-radius:15px; box-shadow:0 4px 6px rgba(0,0,0,0.2);}
.add-form input[type="text"], .add-form button {margin:8px 0; padding:10px; border-radius:10px; border:1px solid #ccc; width:90%;}
.add-form button {background:#22d3ee;color:white;border:none;font-weight:bold;cursor:pointer; transition:transform 0.2s, background 0.2s;}
.add-form button:hover {transform:scale(1.05); background:linear-gradient(135deg,#22d3ee,#f472b6);}
.file-input{display:none;}
.file-label{display:inline-block;padding:10px 15px;border-radius:10px;background:#38bdf8;color:white;font-weight:bold;cursor:pointer;margin-bottom:10px;}
#preview{margin:10px 0; max-width:100px; border-radius:10px; display:none;}
.delete-btn {position:absolute; top:5px; right:5px; background:red; color:white; border:none; border-radius:50%; width:25px; height:25px; font-weight:bold; cursor:pointer; z-index:20;}
#messageBox {
  position:relative;
  background: linear-gradient(270deg,#ff3cac,#784ba0,#2b86c5,#ff3cac);
  background-size:600% 600%;
  animation: gradientShift 3s ease infinite;
  padding:15px;
  border-radius:20px;
  box-shadow:0 6px 12px rgba(0,0,0,0.3);
  min-height:60px;
  margin-bottom:15px;
  overflow-x:auto;
  color:white;
  font-weight:bold;
  font-size:1.1em;
  white-space:nowrap;
}
</style>
</head>
<body>
<h1>üó£Ô∏è ‡∏ú‡∏π‡πâ‡∏ä‡πà‡∏ß‡∏¢‡∏û‡∏π‡∏î</h1>

<div id="messageBox">
  <div id="messageContent" style="padding-right:70px; overflow-x:auto;"></div>
  <button id="sendBtn" style="
      position:absolute;
      bottom:10px;
      right:10px;
      padding:8px 14px;
      border:none;
      border-radius:20px;
      background:linear-gradient(135deg,#22d3ee,#f472b6);
      color:white;
      font-weight:bold;
      cursor:pointer;
      box-shadow:0 4px 6px rgba(0,0,0,0.2);
      transition: transform 0.2s, box-shadow 0.2s, background 0.4s;
  ">‡∏™‡πà‡∏á</button>
</div>

<div id="mainPage">
  <div class="button-grid" id="buttonGrid">
    <button class="speech-btn" onclick="addMessage('‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ')">
      <img src="https://i.postimg.cc/43Vmrynn/1755590954026.jpg"><span>‡∏™‡∏ß‡∏±‡∏™‡∏î‡∏µ</span>
    </button>
    <button class="speech-btn" onclick="addMessage('‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì')">
      <img src="https://i.postimg.cc/HnZxQ7vv/1755590954073.jpg"><span>‡∏Ç‡∏≠‡∏ö‡∏Ñ‡∏∏‡∏ì</span>
    </button>
    <button class="speech-btn" onclick="addMessage('‡∏´‡∏¥‡∏ß‡∏Ç‡πâ‡∏≤‡∏ß')">
      <img src="https://i.postimg.cc/QdV6kGCf/1755590953971.jpg"><span>‡∏´‡∏¥‡∏ß‡∏Ç‡πâ‡∏≤‡∏ß</span>
    </button>
    <button class="speech-btn" onclick="addMessage('‡∏´‡∏¥‡∏ß‡∏ô‡πâ‡∏≥')">
      <img src="https://i.postimg.cc/c4zCCwnr/1755590953918.jpg"><span>‡∏´‡∏¥‡∏ß‡∏ô‡πâ‡∏≥</span>
    </button>
    <button class="speech-btn" onclick="addMessage('‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ')">
      <img src="https://i.postimg.cc/jd1XXbcg/Screenshot-2025-08-19-17-39-39-903-com-miui-gallery-edit.jpg"><span>‡∏≠‡∏¢‡∏≤‡∏Å‡πÑ‡∏õ</span>
    </button>
    <button class="speech-btn" onclick="addMessage('‡∏á‡πà‡∏ß‡∏á‡∏ô‡∏≠‡∏ô')">
      <img src="https://i.postimg.cc/v8JHdbFV/file-00000000000061f7a3509f32dfcc86f5.png"><span>‡∏á‡πà‡∏ß‡∏á‡∏ô‡∏≠‡∏ô</span>
    </button>
  </div>
</div>

<div class="add-form">
  <h3>‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà</h3>
  <label for="imgInput" class="file-label">üì∑ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</label>
  <input type="file" id="imgInput" class="file-input" accept="image/*"><br>
  <img id="preview" alt="‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏£‡∏π‡∏õ"><br>
  <input type="text" id="textInput" placeholder="‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏û‡∏π‡∏î"><br>
  <button id="addBtn">‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°</button>
</div>

<audio id="clickSound" src="https://www.soundjay.com/buttons/sounds/button-16.mp3"></audio>

<script>
let clickSound = document.getElementById('clickSound');
let messageContent = document.getElementById('messageContent');

function speak(text){
  if(!text) return;
  const utter = new SpeechSynthesisUtterance(text);
  utter.lang = 'th-TH';
  speechSynthesis.speak(utter);
  clickSound.play();
}

function addMessage(text){
  messageContent.innerText += (messageContent.innerText ? ' ' : '') + text;
  messageContent.scrollLeft = messageContent.scrollWidth;
}

// ‡∏õ‡∏∏‡πà‡∏°‡∏™‡πà‡∏á
const sendBtn = document.getElementById('sendBtn');
sendBtn.addEventListener('click', function(){
  const text = messageContent.innerText;
  if(!text) return;
  speak(text);
  messageContent.innerText='';
});

// ‡∏õ‡∏∏‡πà‡∏°‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà + localStorage
function createButton(text, imgData){
    const btn = document.createElement('button');
    btn.className = 'speech-btn';
    btn.onclick = () => addMessage(text);
    if(imgData) btn.innerHTML = `<img src="${imgData}"><span>${text}</span>`;
    else btn.innerHTML = `<span>${text}</span>`;
    const del = document.createElement('button');
    del.className='delete-btn';
    del.innerText='‚úñ';
    del.onclick=(ev)=>{
        ev.stopPropagation();
        btn.remove();
        removeButtonFromStorage(text,imgData);
    };
    btn.appendChild(del);
    document.getElementById('buttonGrid').appendChild(btn);
}

// localStorage functions
function saveButton(text,imgData){
    let buttons = JSON.parse(localStorage.getItem('customButtons')||'[]');
    buttons.push({text,img:imgData});
    localStorage.setItem('customButtons', JSON.stringify(buttons));
}
function removeButtonFromStorage(text,imgData){
    let buttons = JSON.parse(localStorage.getItem('customButtons')||'[]');
    buttons = buttons.filter(b=>!(b.text===text && b.img===imgData));
    localStorage.setItem('customButtons', JSON.stringify(buttons));
}
function loadButtons(){
    let buttons = JSON.parse(localStorage.getItem('customButtons')||'[]');
    buttons.forEach(b=>createButton(b.text,b.img));
}
window.addEventListener('load',loadButtons);

// ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏õ‡∏∏‡πà‡∏°‡πÄ‡∏≠‡∏á
document.getElementById('imgInput').addEventListener('change',function(){
  const file=this.files[0];
  if(file){
    const reader=new FileReader();
    reader.onload=function(e){
      document.getElementById('preview').src=e.target.result;
      document.getElementById('preview').style.display='block';
    }
    reader.readAsDataURL(file);
  }
});
document.getElementById('addBtn').addEventListener('click',function(){
  const text = document.getElementById('textInput').value;
  if(!text){ alert('‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°'); return; }
  const file = document.getElementById('imgInput').files[0];
  if(file){
    const reader = new FileReader();
    reader.onload = function(e){
      const imgData = e.target.result;
      createButton(text,imgData);
      saveButton(text,imgData);
    }
    reader.readAsDataURL(file);
  }else{
    createButton(text,null);
    saveButton(text,null);
  }
  document.getElementById('imgInput').value='';
  document.getElementById('textInput').value='';
  document.getElementById('preview').style.display='none';
});

// ‡∏•‡∏á‡∏ó‡∏∞‡πÄ‡∏ö‡∏µ‡∏¢‡∏ô SW
if('serviceWorker' in navigator){
  navigator.serviceWorker.register('./service-worker.js')
    .then(reg => console.log('SW registered:',reg))
    .catch(err => console.log('SW failed:',err));
}
</script>
</body>
</html>
